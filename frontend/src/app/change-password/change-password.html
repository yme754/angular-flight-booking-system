<div class="login-page">
  <div class="glass-card">
    <div *ngIf="isSuccessful" class="text-center animate-fade-in">
      <div class="mb-4">
        <img src="https://img.icons8.com/?size=100&id=11695&format=png&color=000000" alt="Success" style="width: 80px;">
      </div>
      <h3 style="color: #370F6E; font-weight: 700; margin-bottom: 15px;">Password Updated!</h3>
      <p class="text-muted mb-4">Your password has been changed successfully. You can now login with your new credentials.</p>
      <a routerLink="/login" class="btn-login text-decoration-none d-block text-center">
        Go to Login
      </a>
    </div>
    <div *ngIf="!isSuccessful">
      <h2>Reset Password</h2>
      <p class="subtitle">Create a new password for <strong>{{ form.username }}</strong></p>
      <form name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
        <input type="hidden" name="username" [(ngModel)]="form.username">
        <div class="mb-4">
          <label class="form-label-custom">New Password</label>
          <div class="input-group-row">
            <div class="icon-box">
               <img src="https://img.icons8.com/ios/50/000000/key.png" class="input-icon" alt="key">
            </div>
            <input
              type="password"
              class="form-control-custom"
              name="newPassword"
              [(ngModel)]="form.newPassword"
              required
              minlength="12"
              placeholder="Enter new password"
              #newPassword="ngModel"
            />
          </div>
          <div class="alert-custom alert-danger" *ngIf="newPassword.errors && f.submitted">
            Password must be at least 12 characters.
          </div>
        </div>
        <div class="mb-4">
          <label class="form-label-custom">Confirm Password</label>
          <div class="input-group-row">
            <div class="icon-box">
               <img src="https://img.icons8.com/ios/50/000000/lock.png" class="input-icon" alt="lock">
            </div>
            <input
              type="password"
              class="form-control-custom"
              name="confirmPassword"
              [(ngModel)]="form.confirmPassword"
              required
              placeholder="Confirm new password"
              #confirmPassword="ngModel"
            />
          </div>
          </div>
        <button class="btn-login">Update Password</button>
        <div class="alert-custom alert-danger mt-3 text-center" *ngIf="f.submitted && isFailed">
          {{ errorMessage }}
        </div>
        <div class="text-center mt-3">
          <a routerLink="/login" class="register-link">Cancel</a>
        </div>
      </form>
    </div>

  </div>
</div>