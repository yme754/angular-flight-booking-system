<div class="login-page"> <div class="glass-card">
    <h2>Create Account</h2>
    <p class="subtitle">Join us and start flying today!</p>
    <form *ngIf="!isSuccessful" name="form" (ngSubmit)="f.form.valid && onSubmit()" #f="ngForm" novalidate>
      <div class="mb-3">
        <label class="form-label-custom">Username</label>
        <div class="input-group-row">
          <div class="icon-box">
            <img src="https://img.icons8.com/ios/50/000000/user.png" class="input-icon" alt="user">
          </div>
          <input
            type="text"
            class="form-control-custom"
            name="username"
            [(ngModel)]="form.username"
            required
            minlength="3"
            maxlength="20"
            placeholder="username"
            #username="ngModel"
          />
        </div>
        <div class="alert-custom alert-danger" *ngIf="username.errors && f.submitted">
          Username must be 3-20 characters.
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label-custom">Email</label>
        <div class="input-group-row">
          <div class="icon-box">
            <img src="https://img.icons8.com/?size=100&id=12580&format=png&color=000000" class="input-icon" alt="email">
          </div>
          <input
            type="email"
            class="form-control-custom"
            name="email"
            [(ngModel)]="form.email"
            required
            email
            placeholder="name@example.com"
            #email="ngModel"
          />
        </div>
        <div class="alert-custom alert-danger" *ngIf="email.errors && f.submitted">
          Valid email is required.
        </div>
      </div>
      <div class="mb-3">
        <label class="form-label-custom">Password</label>
        <div class="input-group-row">
          <div class="icon-box">
            <img src="https://img.icons8.com/ios/50/000000/lock.png" class="input-icon" alt="lock">
          </div>
          <input type="password" class="form-control-custom" name="password" [(ngModel)]="form.password"
            required minlength="12" placeholder="password" #password="ngModel"/>
        </div>
        <div class="alert-custom alert-danger" *ngIf="password.errors && f.submitted">
          Password must be at least 12 characters.
        </div>
      </div>

      <div class="mb-3">
        <label class="form-label-custom">Register As</label>
        <div class="input-group-row">
          <div class="icon-box">
            <img src="https://img.icons8.com/ios/50/000000/badge.png" class="input-icon" alt="role">
          </div>
          <select
            class="form-control-custom"
            name="role"
            [(ngModel)]="form.role"
            required
            #role="ngModel">
            <option value="" disabled selected>Select role</option>
            <option value="user">User</option>
            <option value="admin">Admin</option>
          </select>
        </div>
        <div class="alert-custom alert-danger" *ngIf="role.errors && f.submitted">
          Please select a role.
        </div>
      </div>
      <button class="btn-login"> Sign Up
      </button>
      <div class="alert-custom alert-danger mt-3" *ngIf="f.submitted && isSignUpFailed">
        {{ errorMessage }}
      </div>
      <p class="register-link">
        Already have an account? <a routerLink="/login">Login</a>
      </p>
    </form>
    <div class="alert-custom alert-success mt-4" *ngIf="isSuccessful">
      <h4>Registration Successful!</h4>
      <p>Redirecting to login page...</p>
    </div>
  </div>
</div>